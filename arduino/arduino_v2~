const int stepPin = 5; 
const int dirPin = 2; 
const int enPin = 8;
//const int potPin='A2';
int potValPrev=0;

void setup() {
  
  // Sets the two pins as Outputs
  pinMode(stepPin,OUTPUT); 
  pinMode(dirPin,OUTPUT);
  pinMode(enPin,OUTPUT);
  digitalWrite(enPin,LOW);
  
}
void loop() {
  
  int potVal = analogRead(A2);
  if(potVal != potValPrev){
  
    if(potVal>  potValPrev){
    digitalWrite(dirPin,HIGH);
    }
    else{
      digitalWrite(dirPin,LOW);
    }
    
    for(int x=0; x<abs(potVal-potValPrev);x++){
      digitalWrite(stepPin,HIGH); 
      delayMicroseconds(500); 
      digitalWrite(stepPin,LOW); 
      delayMicroseconds(500); 
    }  
    
  }
  
  //delay(100);
  potValPrev=potVal;
  
}
